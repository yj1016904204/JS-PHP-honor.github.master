window.addEventListener("load",function(){var e=this.document.querySelector("form"),o=this.document.querySelector("[name=phone]"),t=!1,n=document.querySelector("[name=password]"),l=!1,r=!1,i=e.querySelectorAll(".prompt"),a=document.querySelector(".random");a.onclick=function(){var e=randomFour();this.innerHTML=e},a.click();var s=document.querySelector("[name=verification]");s.onblur=function(){r=s.value==a.innerHTML?(i[2].style.display="none",!0):!(i[2].style.display="block")},o.onblur=function(){/^(1|\+861)[3-8]{1}\d{9}$/.test(o.value)?(t=!0,i[0].style.display="none"):(i[0].style.display="block",t=!1)},n.onblur=function(){/^[(a-z)||(A-Z)]\w{7,30}$/.test(n.value)?(l=!0,i[1].style.display="none"):(i[1].style.display="block",l=!1)};var c=document.querySelector(".eye");let u=0;c.onclick=function(){u=0==u?(this.parentNode.firstElementChild.type="text",this.style="background:url(../img/password_eyeon.svg);background-size:contain;",1):(this.parentNode.firstElementChild.type="password",this.style="background:url(../img/password_eyeoff.svg);background-size:contain;",0)};let d=getCookie("urlId"),y=getCookie("cartId");e.onsubmit=function(){return t&&l&&r?ajax({url:"./../php/login.php",type:"POST",data:`phone=${o.value}&password=${n.value}`,success:function(e){e?(setCookie("phone",o.value),alert("欢迎光临"),d?location.href="./detail.html?id="+d:y?location.href=y:location.href="./index.html"):(alert("登录失败，请重新登录"),location.href="./login.html")}}):(o.focus(),n.focus(),s.focus()),!1}});